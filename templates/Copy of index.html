{% extends "base.html" %}
{% load thumbnail %}

{% block menu %}
		<span class="menutext">Home</span>
		<a class="normalLink" href="/investigation">Investigations (0)</a>
		|
		<a class="normalLink" href="/upload">Upload</a>
		<a class="normalLink" href="/report">Report</a>
{% endblock %}

{% block content %}

<div id="leftbox">
	<div class="box_color_green">
		<h1>Welcome!</h1>
		<br>
		fordrop stands for Forensic Dropbox and it is a service that enables you to share
		and explore forensic data with others.<br><br>
		Get social interaction with other investigators and maybe start a joint investigation.
		fordrop enables you to get a quick insight of connections between different investigations and allows you to follow the progress in realtime
		and be a part of the solution. 
		<br>
		<br>
		<span class="icon">
			<img src="/site_media/img/search.png">
		</span>
		<a class="orange" href="/search"><b>Search</b></a>
		<br>
		<span class="icon">
			<img src="/site_media/img/upload2.png">
		</span>
		<a class="orange" href="/upload"><b>Upload files</b></a>
		<br>
		<span class="icon">
			<img src="/site_media/img/report.png">
		</span>
		<a class="orange" href="/report"><b>Report</b> (ex. phishing, hosts or stolen identities)</a>
		<br><br>
	</div>
</div>

<div id="rightbox-tags">
	<div class="box_color_white">
		<h1>Tags</h1>
		<br>
		{% for tag in tagcloud %}
			<font size="{{ tag.font_size }}"><a href="/search/tag?t={{ tag.id }}">{{ tag }}</a></font>
		{% endfor %}
	</div>
</div>

<div id="rightbox-systeminfo">
	<div class="box_color_white">
		<h1>System information</h1>
		<br>
		Active people:<br>
		Uploaded files:<br>
		Reports:<br>
		Investigations:<br>
	</div>
</div>

<br clear="all">
<br clear="all">
<br>


<h1>My investigations</h1>
	{% for investigation in investigations %}
	{% endfor %}
<br>

<div class="white_box">

	<h1>Stream</h1>
	<br>
	{% for item in stream|dictsortreversed:"time"|slice:":5" %}
		<div class="post_container">
			{% ifequal item.type "comment" %}
				<div class="avatar"><img src="{% thumbnail item.object.user.get_profile.avatar 30x30 %}"></div>
				<div class="post_box">
			    	<span class="threadTitle"><a href="/user/{{ item.object.user.id }}">{{ item.object.user.first_name }} {{ item.object.user.last_name }}</a></span><span class="threadText"> Commented on {{ item.object.content_type }}</span>
					{% ifequal item.object.content_type.name "file" %}
						<span class="threadText">
							<i><a href="/file/{{ item.object.content_object.id }}/show">{{ item.object.content_object }}</a></i> ({{ item.object.submit_date|timesince }} ago)
						</span>
					{% endifequal %}
					{% ifequal item.object.content_type.name "report" %}
						<span class="threadText">
							<i><a href="/report/{{ item.object.content_object.id }}/show">{{ item.object.content_object.sha1 }}</a></i> ({{ item.object.submit_date|timesince }} ago)
						</span>
					{% endifequal %}
					{% ifequal item.object.content_type.name "tag" %}
						<span class="threadText">
							<i>{{ item.object.content_object }}</i> ({{ item.object.submit_date|timesince }} ago)
						</span>
					{% endifequal %} 
			    	<br>
			    	{{ item.object.comment|linebreaksbr|truncatewords_html:15 }}
			    </div>
			{% endifequal %}
			{% ifequal item.type "file" %}
				<div class="avatar"><img src={% thumbnail item.object.user.get_profile.avatar 30x30 %}></div>
				<div class="post_box">
			    	<span class="threadTitle"><a href="/user/{{ item.object.user.id }}">{{ item.object.user.first_name }} {{ item.object.user.last_name }}</a></span> 
					<span class="threadText">
						 Uploaded file <i>{{ item.object.filename }}</i> ({{ item.object.timecreated|timesince }} ago)
					</span>
					<br>
					Filetype: {{ item.object.file.filetype }}
				</div>
			{% endifequal %}
			{% ifequal item.type "report" %}
				<div class="avatar"><img src={% thumbnail item.object.user.get_profile.avatar 30x30 %}></div>
				<div class="post_box">
			    	<span class="threadTitle"><a href="/user/{{ item.object.user.id }}">{{ item.object.user.first_name }} {{ item.object.user.last_name }}</a></span> 
					<span class="threadText">
						 Report (<i>{{ item.object.report.type }}</i>) ({{ item.object.timecreated|timesince }} ago)
					</span>
					<br>
					Value: {{ item.object.report.value }}
				</div>
			{% endifequal %}
		</div>
	{% endfor %}
</div>	
{% endblock %}